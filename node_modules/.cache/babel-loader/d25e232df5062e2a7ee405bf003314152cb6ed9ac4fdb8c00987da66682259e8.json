{"ast":null,"code":"import CanvasComp from \"./CanvasComp.vue\";\nimport Proton from \"proton-engine\";\nimport RAFManager from \"raf-manager\";\nimport { getColor } from \"../utils/Color\";\nconst colors = [\"#fad390\", \"#81ecec\", \"#ffffff\", \"#badc58\", \"#f9ca24\", \"#FEA47F\"];\nexport default {\n  name: \"TadpoleParticles\",\n  components: {\n    CanvasComp\n  },\n  props: {\n    canvas: Object,\n    bg: Boolean,\n    color: String,\n    num: Number,\n    config: {}\n  },\n  methods: {\n    canvasInited(canvas) {\n      this.createProton(canvas);\n      RAFManager.add(this.renderProton);\n    },\n    canvasResize({\n      width,\n      height\n    }) {\n      this.crossZoneBehaviour.zone.width = width;\n      this.crossZoneBehaviour.zone.height = height;\n      this.proton.renderers[0].resize(width, height);\n    },\n    canvasMouseDown(e) {},\n    createProton(canvas) {\n      const width = canvas.width;\n      const height = canvas.height;\n      this.proton = new Proton();\n      const emitter = new Proton.Emitter();\n      emitter.damping = 0.008;\n      emitter.rate = new Proton.Rate(this.num ? this.num : 50);\n      emitter.addInitialize(new Proton.Mass(1));\n      emitter.addInitialize(new Proton.Radius(5, 9));\n      emitter.addInitialize(new Proton.Velocity(new Proton.Span(1.5), new Proton.Span(0, 360), \"polar\"));\n      emitter.addInitialize(new Proton.Position(new Proton.RectZone(0, 0, width, height)));\n      const mouseInfo = {\n        x: width / 2,\n        y: height / 2\n      };\n      const attractionBehaviour = new Proton.Attraction(mouseInfo, 0, 0);\n      const crossZoneBehaviour = new Proton.CrossZone(new Proton.RectZone(0, 0, canvas.width, canvas.height), \"bound\");\n      emitter.addBehaviour(new Proton.Color(this.color || \"#bbbbbb\"));\n      //emitter.addBehaviour(new Proton.Alpha(new Proton.Span(0.5, 1)));\n      emitter.addBehaviour(attractionBehaviour, crossZoneBehaviour);\n      emitter.addBehaviour(new Proton.RandomDrift(15, 15, 0.05));\n      emitter.emit(\"once\");\n      this.proton.addEmitter(emitter);\n      this.proton.addRenderer(this.createRenderer(canvas));\n      this.crossZoneBehaviour = crossZoneBehaviour;\n    },\n    createRenderer(canvas) {\n      const jointCount = 12;\n      const delayTime = 6;\n      const context = canvas.getContext(\"2d\");\n      const renderer = new Proton.CanvasRenderer(canvas);\n      renderer.onProtonUpdate = function () {\n        context.clearRect(0, 0, canvas.width, canvas.height);\n      };\n      renderer.onParticleCreated = particle => {\n        particle.data.points = [];\n        particle.data.index = 0;\n      };\n      renderer.onParticleUpdate = function (particle) {\n        drawTadpoleTail(particle);\n        if (particle.data.index % delayTime === 0) fillPointsData(particle);\n        drawTadpoleHead(particle);\n        particle.data.index++;\n      };\n      const fillPointsData = particle => {\n        particle.data.points.unshift(particle.p.y);\n        particle.data.points.unshift(particle.p.x);\n        if (particle.data.points.length > jointCount) {\n          particle.data.points.pop();\n          particle.data.points.pop();\n        }\n      };\n      const drawTadpoleHead = particle => {\n        context.fillStyle = particle.color;\n        context.beginPath();\n        context.arc(particle.p.x, particle.p.y, particle.radius, 0, Math.PI * 2, true);\n        context.closePath();\n        context.fill();\n      };\n      const drawTadpoleTail = particle => {\n        context.beginPath();\n        context.strokeStyle = particle.color;\n        context.moveTo(particle.p.x, particle.p.y);\n        const l = particle.data.points.length;\n        for (let i = 0; i < l; i += 2) {\n          const x = particle.data.points[i];\n          const y = particle.data.points[i + 1];\n          context.lineWidth = linearEvaluation(i, l);\n          context.lineTo(x, y);\n          context.stroke();\n        }\n      };\n      const linearEvaluation = (i, l) => {\n        if (l <= 2) return 1;\n        const max = 6;\n        const A = (max - 1) / (2 / l - 1);\n        const B = 1 - A;\n        const X = (i + 2) / l;\n        let val = A * X + B;\n        val = val >> 0;\n        return val;\n      };\n      return renderer;\n    },\n    renderProton() {\n      this.proton && this.proton.update();\n    }\n  },\n  beforeDestroy() {\n    try {\n      this.proton.destroy();\n      RAFManager.remove(this.renderProton);\n    } catch (e) {}\n  }\n};","map":{"version":3,"names":["CanvasComp","Proton","RAFManager","getColor","colors","name","components","props","canvas","Object","bg","Boolean","color","String","num","Number","config","methods","canvasInited","createProton","add","renderProton","canvasResize","width","height","crossZoneBehaviour","zone","proton","renderers","resize","canvasMouseDown","e","emitter","Emitter","damping","rate","Rate","addInitialize","Mass","Radius","Velocity","Span","Position","RectZone","mouseInfo","x","y","attractionBehaviour","Attraction","CrossZone","addBehaviour","Color","RandomDrift","emit","addEmitter","addRenderer","createRenderer","jointCount","delayTime","context","getContext","renderer","CanvasRenderer","onProtonUpdate","clearRect","onParticleCreated","particle","data","points","index","onParticleUpdate","drawTadpoleTail","fillPointsData","drawTadpoleHead","unshift","p","length","pop","fillStyle","beginPath","arc","radius","Math","PI","closePath","fill","strokeStyle","moveTo","l","i","lineWidth","linearEvaluation","lineTo","stroke","max","A","B","X","val","update","beforeDestroy","destroy","remove"],"sources":["/home/arwin/Desktop/code/dashnote/dashnote-website/node_modules/particles-bg-vue/src/particles-bg/particles/TadpoleParticles.vue"],"sourcesContent":["<template>\n  <canvas-comp\n    :bg=\"bg\"\n    :canvas=\"canvas\"\n    global-composite-operation=\"xor\"\n    v-on:canvasInited=\"canvasInited\"\n    v-on:canvasResize=\"canvasResize\"\n    v-on:canvasMouseDown=\"canvasMouseDown\"\n  />\n</template>\n\n<script>\nimport CanvasComp from \"./CanvasComp.vue\";\nimport Proton from \"proton-engine\";\nimport RAFManager from \"raf-manager\";\nimport { getColor } from \"../utils/Color\";\n\nconst colors = [\n  \"#fad390\",\n  \"#81ecec\",\n  \"#ffffff\",\n  \"#badc58\",\n  \"#f9ca24\",\n  \"#FEA47F\"\n];\nexport default {\n  name: \"TadpoleParticles\",\n  components: {\n    CanvasComp\n  },\n  props: {\n    canvas: Object,\n    bg: Boolean,\n    color: String,\n    num: Number,\n    config: {}\n  },\n  methods: {\n    canvasInited(canvas) {\n      this.createProton(canvas);\n      RAFManager.add(this.renderProton);\n    },\n    canvasResize({ width, height }) {\n      this.crossZoneBehaviour.zone.width = width;\n      this.crossZoneBehaviour.zone.height = height;\n      this.proton.renderers[0].resize(width, height);\n    },\n    canvasMouseDown(e) {},\n\n    createProton(canvas) {\n      const width = canvas.width;\n      const height = canvas.height;\n      this.proton = new Proton();\n\n      const emitter = new Proton.Emitter();\n      emitter.damping = 0.008;\n      emitter.rate = new Proton.Rate(this.num ? this.num : 50);\n      emitter.addInitialize(new Proton.Mass(1));\n      emitter.addInitialize(new Proton.Radius(5, 9));\n      emitter.addInitialize(\n        new Proton.Velocity(\n          new Proton.Span(1.5),\n          new Proton.Span(0, 360),\n          \"polar\"\n        )\n      );\n      emitter.addInitialize(\n        new Proton.Position(new Proton.RectZone(0, 0, width, height))\n      );\n\n      const mouseInfo = {\n        x: width / 2,\n        y: height / 2\n      };\n\n      const attractionBehaviour = new Proton.Attraction(mouseInfo, 0, 0);\n      const crossZoneBehaviour = new Proton.CrossZone(\n        new Proton.RectZone(0, 0, canvas.width, canvas.height),\n        \"bound\"\n      );\n      emitter.addBehaviour(new Proton.Color(this.color || \"#bbbbbb\"));\n      //emitter.addBehaviour(new Proton.Alpha(new Proton.Span(0.5, 1)));\n      emitter.addBehaviour(attractionBehaviour, crossZoneBehaviour);\n      emitter.addBehaviour(new Proton.RandomDrift(15, 15, 0.05));\n      emitter.emit(\"once\");\n\n      this.proton.addEmitter(emitter);\n      this.proton.addRenderer(this.createRenderer(canvas));\n      this.crossZoneBehaviour = crossZoneBehaviour;\n    },\n    createRenderer(canvas) {\n      const jointCount = 12;\n      const delayTime = 6;\n      const context = canvas.getContext(\"2d\");\n      const renderer = new Proton.CanvasRenderer(canvas);\n\n      renderer.onProtonUpdate = function() {\n        context.clearRect(0, 0, canvas.width, canvas.height);\n      };\n\n      renderer.onParticleCreated = particle => {\n        particle.data.points = [];\n        particle.data.index = 0;\n      };\n\n      renderer.onParticleUpdate = function(particle) {\n        drawTadpoleTail(particle);\n        if (particle.data.index % delayTime === 0) fillPointsData(particle);\n        drawTadpoleHead(particle);\n        particle.data.index++;\n      };\n\n      const fillPointsData = particle => {\n        particle.data.points.unshift(particle.p.y);\n        particle.data.points.unshift(particle.p.x);\n\n        if (particle.data.points.length > jointCount) {\n          particle.data.points.pop();\n          particle.data.points.pop();\n        }\n      };\n\n      const drawTadpoleHead = particle => {\n        context.fillStyle = particle.color;\n        context.beginPath();\n        context.arc(\n          particle.p.x,\n          particle.p.y,\n          particle.radius,\n          0,\n          Math.PI * 2,\n          true\n        );\n        context.closePath();\n        context.fill();\n      };\n\n      const drawTadpoleTail = particle => {\n        context.beginPath();\n        context.strokeStyle = particle.color;\n\n        context.moveTo(particle.p.x, particle.p.y);\n\n        const l = particle.data.points.length;\n        for (let i = 0; i < l; i += 2) {\n          const x = particle.data.points[i];\n          const y = particle.data.points[i + 1];\n\n          context.lineWidth = linearEvaluation(i, l);\n          context.lineTo(x, y);\n          context.stroke();\n        }\n      };\n\n      const linearEvaluation = (i, l) => {\n        if (l <= 2) return 1;\n\n        const max = 6;\n        const A = (max - 1) / (2 / l - 1);\n        const B = 1 - A;\n        const X = (i + 2) / l;\n        let val = A * X + B;\n        val = val >> 0;\n\n        return val;\n      };\n\n      return renderer;\n    },\n    renderProton() {\n      this.proton && this.proton.update();\n    }\n  },\n  beforeDestroy() {\n    try {\n      this.proton.destroy();\n      RAFManager.remove(this.renderProton);\n    } catch (e) {}\n  }\n};\n</script>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}