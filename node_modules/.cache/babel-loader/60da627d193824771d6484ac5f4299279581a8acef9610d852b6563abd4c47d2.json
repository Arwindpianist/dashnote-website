{"ast":null,"code":"import CanvasComp from \"./CanvasComp.vue\";\nimport Proton from \"proton-engine\";\nimport RAFManager from \"raf-manager\";\nimport { getColor } from \"../utils/Color\";\nconst colors = [\"#fad390\", \"#81ecec\", \"#ffffff\", \"#badc58\", \"#f9ca24\", \"#FEA47F\"];\nexport default {\n  name: \"SquareParticles\",\n  components: {\n    CanvasComp\n  },\n  props: {\n    canvas: Object,\n    bg: Boolean,\n    color: String,\n    num: Number,\n    config: {}\n  },\n  methods: {\n    canvasInited(canvas) {\n      this.createProton(canvas);\n      RAFManager.add(this.renderProton);\n      if (this.color) {\n        canvas.style.backgroundColor = this.color;\n      }\n    },\n    canvasResize({\n      width,\n      height\n    }) {\n      const dis = 150;\n      this.crossZoneBehaviour.zone.width = width + 2 * dis;\n      this.crossZoneBehaviour.zone.height = height + 2 * dis;\n      this.proton.renderers[0].resize(width, height);\n    },\n    canvasMouseDown(e) {},\n    createProton(canvas) {\n      const width = canvas.width;\n      const height = canvas.height;\n      this.proton = new Proton();\n      const emitter = new Proton.Emitter();\n      emitter.rate = new Proton.Rate(this.num ? this.num : 50);\n      emitter.damping = 0;\n      emitter.addInitialize(new Proton.Mass(1));\n      emitter.addInitialize(new Proton.Radius(4, 70));\n      emitter.addInitialize(new Proton.Velocity(new Proton.Span(4, 12), 180, \"polar\"));\n      emitter.addInitialize(new Proton.Position(new Proton.LineZone(0, 0, canvas.width, 0)));\n      const dis = 150;\n      const crossZoneBehaviour = new Proton.CrossZone(new Proton.RectZone(0 - dis, 0 - dis, canvas.width + 2 * dis, canvas.height + 2 * dis), \"cross\");\n      emitter.addBehaviour(crossZoneBehaviour);\n      emitter.addBehaviour(new Proton.Alpha(Proton.getSpan(0.1, 0.55)));\n      emitter.addBehaviour(new Proton.Color(colors));\n      emitter.emit(\"once\");\n      this.proton.addEmitter(emitter);\n      const renderer = this.createRenderer(canvas);\n      this.proton.addRenderer(renderer);\n      this.crossZoneBehaviour = crossZoneBehaviour;\n      emitter.preEmit(2);\n    },\n    createRenderer(canvas) {\n      const context = canvas.getContext(\"2d\");\n      const renderer = new Proton.CustomRenderer();\n      renderer.onProtonUpdate = () => {\n        context.clearRect(0, 0, canvas.width, canvas.height);\n      };\n      renderer.onParticleCreated = particle => {\n        const w = particle.radius || 60;\n        const h = Proton.MathUtil.randomAToB(100, 200, \"int\");\n        particle.data.w = w;\n        particle.data.h = h;\n      };\n      renderer.onParticleUpdate = particle => {\n        const w = particle.data.w;\n        const h = particle.data.h;\n        context.save();\n        context.globalAlpha = particle.alpha;\n        context.fillStyle = particle.color;\n        context.translate(particle.p.x, particle.p.y);\n        context.rotate(Proton.MathUtil.degreeTransform(particle.rotation));\n        context.translate(-particle.p.x, -particle.p.y);\n        context.beginPath();\n        context.rect(particle.p.x - w / 2, particle.p.y - h / 2, w, h);\n        context.closePath();\n        context.fill();\n        context.globalAlpha = 1;\n        context.restore();\n      };\n      return renderer;\n    },\n    renderProton() {\n      this.proton && this.proton.update();\n    }\n  },\n  beforeDestroy() {\n    try {\n      this.proton.destroy();\n      RAFManager.remove(this.renderProton);\n    } catch (e) {}\n  }\n};","map":{"version":3,"names":["CanvasComp","Proton","RAFManager","getColor","colors","name","components","props","canvas","Object","bg","Boolean","color","String","num","Number","config","methods","canvasInited","createProton","add","renderProton","style","backgroundColor","canvasResize","width","height","dis","crossZoneBehaviour","zone","proton","renderers","resize","canvasMouseDown","e","emitter","Emitter","rate","Rate","damping","addInitialize","Mass","Radius","Velocity","Span","Position","LineZone","CrossZone","RectZone","addBehaviour","Alpha","getSpan","Color","emit","addEmitter","renderer","createRenderer","addRenderer","preEmit","context","getContext","CustomRenderer","onProtonUpdate","clearRect","onParticleCreated","particle","w","radius","h","MathUtil","randomAToB","data","onParticleUpdate","save","globalAlpha","alpha","fillStyle","translate","p","x","y","rotate","degreeTransform","rotation","beginPath","rect","closePath","fill","restore","update","beforeDestroy","destroy","remove"],"sources":["/home/arwin/Desktop/code/dashnote/dashnote-website/node_modules/particles-bg-vue/src/particles-bg/particles/SquareParticles.vue"],"sourcesContent":["<template>\n  <canvas-comp\n    :bg=\"bg\"\n    :canvas=\"canvas\"\n    global-composite-operation=\"lighter\"\n    v-on:canvasInited=\"canvasInited\"\n    v-on:canvasResize=\"canvasResize\"\n    v-on:canvasMouseDown=\"canvasMouseDown\"\n  />\n</template>\n\n<script>\nimport CanvasComp from \"./CanvasComp.vue\";\nimport Proton from \"proton-engine\";\nimport RAFManager from \"raf-manager\";\nimport { getColor } from \"../utils/Color\";\n\nconst colors = [\n  \"#fad390\",\n  \"#81ecec\",\n  \"#ffffff\",\n  \"#badc58\",\n  \"#f9ca24\",\n  \"#FEA47F\"\n];\nexport default {\n  name: \"SquareParticles\",\n  components: {\n    CanvasComp\n  },\n  props: {\n    canvas: Object,\n    bg: Boolean,\n    color: String,\n    num: Number,\n    config: {}\n  },\n  methods: {\n    canvasInited(canvas) {\n      this.createProton(canvas);\n      RAFManager.add(this.renderProton);\n      if (this.color) {\n        canvas.style.backgroundColor = this.color;\n      }\n    },\n    canvasResize({ width, height }) {\n      const dis = 150;\n      this.crossZoneBehaviour.zone.width = width + 2 * dis;\n      this.crossZoneBehaviour.zone.height = height + 2 * dis;\n      this.proton.renderers[0].resize(width, height);\n    },\n    canvasMouseDown(e) {},\n\n    createProton(canvas) {\n      const width = canvas.width;\n      const height = canvas.height;\n      this.proton = new Proton();\n      const emitter = new Proton.Emitter();\n      emitter.rate = new Proton.Rate(this.num ? this.num : 50);\n      emitter.damping = 0;\n\n      emitter.addInitialize(new Proton.Mass(1));\n      emitter.addInitialize(new Proton.Radius(4, 70));\n      emitter.addInitialize(\n        new Proton.Velocity(new Proton.Span(4, 12), 180, \"polar\")\n      );\n      emitter.addInitialize(\n        new Proton.Position(new Proton.LineZone(0, 0, canvas.width, 0))\n      );\n\n      const dis = 150;\n      const crossZoneBehaviour = new Proton.CrossZone(\n        new Proton.RectZone(\n          0 - dis,\n          0 - dis,\n          canvas.width + 2 * dis,\n          canvas.height + 2 * dis\n        ),\n        \"cross\"\n      );\n      emitter.addBehaviour(crossZoneBehaviour);\n      emitter.addBehaviour(new Proton.Alpha(Proton.getSpan(0.1, 0.55)));\n      emitter.addBehaviour(new Proton.Color(colors));\n\n      emitter.emit(\"once\");\n      this.proton.addEmitter(emitter);\n      const renderer = this.createRenderer(canvas);\n      this.proton.addRenderer(renderer);\n\n      this.crossZoneBehaviour = crossZoneBehaviour;\n      emitter.preEmit(2);\n    },\n    createRenderer(canvas) {\n      const context = canvas.getContext(\"2d\");\n      const renderer = new Proton.CustomRenderer();\n\n      renderer.onProtonUpdate = () => {\n        context.clearRect(0, 0, canvas.width, canvas.height);\n      };\n\n      renderer.onParticleCreated = particle => {\n        const w = particle.radius || 60;\n        const h = Proton.MathUtil.randomAToB(100, 200, \"int\");\n        particle.data.w = w;\n        particle.data.h = h;\n      };\n\n      renderer.onParticleUpdate = particle => {\n        const w = particle.data.w;\n        const h = particle.data.h;\n        context.save();\n        context.globalAlpha = particle.alpha;\n        context.fillStyle = particle.color;\n\n        context.translate(particle.p.x, particle.p.y);\n        context.rotate(Proton.MathUtil.degreeTransform(particle.rotation));\n        context.translate(-particle.p.x, -particle.p.y);\n\n        context.beginPath();\n        context.rect(particle.p.x - w / 2, particle.p.y - h / 2, w, h);\n\n        context.closePath();\n        context.fill();\n        context.globalAlpha = 1;\n        context.restore();\n      };\n\n      return renderer;\n    },\n    renderProton() {\n      this.proton && this.proton.update();\n    }\n  },\n  beforeDestroy() {\n    try {\n      this.proton.destroy();\n      RAFManager.remove(this.renderProton);\n    } catch (e) {}\n  }\n};\n</script>\n"],"mappings":"AAYA,OAAOA,UAAS,MAAO,kBAAkB;AACzC,OAAOC,MAAK,MAAO,eAAe;AAClC,OAAOC,UAAS,MAAO,aAAa;AACpC,SAASC,QAAO,QAAS,gBAAgB;AAEzC,MAAMC,MAAK,GAAI,CACb,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAQ,CACT;AACD,eAAe;EACbC,IAAI,EAAE,iBAAiB;EACvBC,UAAU,EAAE;IACVN;EACF,CAAC;EACDO,KAAK,EAAE;IACLC,MAAM,EAAEC,MAAM;IACdC,EAAE,EAAEC,OAAO;IACXC,KAAK,EAAEC,MAAM;IACbC,GAAG,EAAEC,MAAM;IACXC,MAAM,EAAE,CAAC;EACX,CAAC;EACDC,OAAO,EAAE;IACPC,YAAYA,CAACV,MAAM,EAAE;MACnB,IAAI,CAACW,YAAY,CAACX,MAAM,CAAC;MACzBN,UAAU,CAACkB,GAAG,CAAC,IAAI,CAACC,YAAY,CAAC;MACjC,IAAI,IAAI,CAACT,KAAK,EAAE;QACdJ,MAAM,CAACc,KAAK,CAACC,eAAc,GAAI,IAAI,CAACX,KAAK;MAC3C;IACF,CAAC;IACDY,YAAYA,CAAC;MAAEC,KAAK;MAAEC;IAAO,CAAC,EAAE;MAC9B,MAAMC,GAAE,GAAI,GAAG;MACf,IAAI,CAACC,kBAAkB,CAACC,IAAI,CAACJ,KAAI,GAAIA,KAAI,GAAI,IAAIE,GAAG;MACpD,IAAI,CAACC,kBAAkB,CAACC,IAAI,CAACH,MAAK,GAAIA,MAAK,GAAI,IAAIC,GAAG;MACtD,IAAI,CAACG,MAAM,CAACC,SAAS,CAAC,CAAC,CAAC,CAACC,MAAM,CAACP,KAAK,EAAEC,MAAM,CAAC;IAChD,CAAC;IACDO,eAAeA,CAACC,CAAC,EAAE,CAAC,CAAC;IAErBf,YAAYA,CAACX,MAAM,EAAE;MACnB,MAAMiB,KAAI,GAAIjB,MAAM,CAACiB,KAAK;MAC1B,MAAMC,MAAK,GAAIlB,MAAM,CAACkB,MAAM;MAC5B,IAAI,CAACI,MAAK,GAAI,IAAI7B,MAAM,CAAC,CAAC;MAC1B,MAAMkC,OAAM,GAAI,IAAIlC,MAAM,CAACmC,OAAO,CAAC,CAAC;MACpCD,OAAO,CAACE,IAAG,GAAI,IAAIpC,MAAM,CAACqC,IAAI,CAAC,IAAI,CAACxB,GAAE,GAAI,IAAI,CAACA,GAAE,GAAI,EAAE,CAAC;MACxDqB,OAAO,CAACI,OAAM,GAAI,CAAC;MAEnBJ,OAAO,CAACK,aAAa,CAAC,IAAIvC,MAAM,CAACwC,IAAI,CAAC,CAAC,CAAC,CAAC;MACzCN,OAAO,CAACK,aAAa,CAAC,IAAIvC,MAAM,CAACyC,MAAM,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;MAC/CP,OAAO,CAACK,aAAa,CACnB,IAAIvC,MAAM,CAAC0C,QAAQ,CAAC,IAAI1C,MAAM,CAAC2C,IAAI,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,GAAG,EAAE,OAAO,CAC1D,CAAC;MACDT,OAAO,CAACK,aAAa,CACnB,IAAIvC,MAAM,CAAC4C,QAAQ,CAAC,IAAI5C,MAAM,CAAC6C,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAEtC,MAAM,CAACiB,KAAK,EAAE,CAAC,CAAC,CAChE,CAAC;MAED,MAAME,GAAE,GAAI,GAAG;MACf,MAAMC,kBAAiB,GAAI,IAAI3B,MAAM,CAAC8C,SAAS,CAC7C,IAAI9C,MAAM,CAAC+C,QAAQ,CACjB,IAAIrB,GAAG,EACP,IAAIA,GAAG,EACPnB,MAAM,CAACiB,KAAI,GAAI,IAAIE,GAAG,EACtBnB,MAAM,CAACkB,MAAK,GAAI,IAAIC,GACtB,CAAC,EACD,OACF,CAAC;MACDQ,OAAO,CAACc,YAAY,CAACrB,kBAAkB,CAAC;MACxCO,OAAO,CAACc,YAAY,CAAC,IAAIhD,MAAM,CAACiD,KAAK,CAACjD,MAAM,CAACkD,OAAO,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC,CAAC;MACjEhB,OAAO,CAACc,YAAY,CAAC,IAAIhD,MAAM,CAACmD,KAAK,CAAChD,MAAM,CAAC,CAAC;MAE9C+B,OAAO,CAACkB,IAAI,CAAC,MAAM,CAAC;MACpB,IAAI,CAACvB,MAAM,CAACwB,UAAU,CAACnB,OAAO,CAAC;MAC/B,MAAMoB,QAAO,GAAI,IAAI,CAACC,cAAc,CAAChD,MAAM,CAAC;MAC5C,IAAI,CAACsB,MAAM,CAAC2B,WAAW,CAACF,QAAQ,CAAC;MAEjC,IAAI,CAAC3B,kBAAiB,GAAIA,kBAAkB;MAC5CO,OAAO,CAACuB,OAAO,CAAC,CAAC,CAAC;IACpB,CAAC;IACDF,cAAcA,CAAChD,MAAM,EAAE;MACrB,MAAMmD,OAAM,GAAInD,MAAM,CAACoD,UAAU,CAAC,IAAI,CAAC;MACvC,MAAML,QAAO,GAAI,IAAItD,MAAM,CAAC4D,cAAc,CAAC,CAAC;MAE5CN,QAAQ,CAACO,cAAa,GAAI,MAAM;QAC9BH,OAAO,CAACI,SAAS,CAAC,CAAC,EAAE,CAAC,EAAEvD,MAAM,CAACiB,KAAK,EAAEjB,MAAM,CAACkB,MAAM,CAAC;MACtD,CAAC;MAED6B,QAAQ,CAACS,iBAAgB,GAAIC,QAAO,IAAK;QACvC,MAAMC,CAAA,GAAID,QAAQ,CAACE,MAAK,IAAK,EAAE;QAC/B,MAAMC,CAAA,GAAInE,MAAM,CAACoE,QAAQ,CAACC,UAAU,CAAC,GAAG,EAAE,GAAG,EAAE,KAAK,CAAC;QACrDL,QAAQ,CAACM,IAAI,CAACL,CAAA,GAAIA,CAAC;QACnBD,QAAQ,CAACM,IAAI,CAACH,CAAA,GAAIA,CAAC;MACrB,CAAC;MAEDb,QAAQ,CAACiB,gBAAe,GAAIP,QAAO,IAAK;QACtC,MAAMC,CAAA,GAAID,QAAQ,CAACM,IAAI,CAACL,CAAC;QACzB,MAAME,CAAA,GAAIH,QAAQ,CAACM,IAAI,CAACH,CAAC;QACzBT,OAAO,CAACc,IAAI,CAAC,CAAC;QACdd,OAAO,CAACe,WAAU,GAAIT,QAAQ,CAACU,KAAK;QACpChB,OAAO,CAACiB,SAAQ,GAAIX,QAAQ,CAACrD,KAAK;QAElC+C,OAAO,CAACkB,SAAS,CAACZ,QAAQ,CAACa,CAAC,CAACC,CAAC,EAAEd,QAAQ,CAACa,CAAC,CAACE,CAAC,CAAC;QAC7CrB,OAAO,CAACsB,MAAM,CAAChF,MAAM,CAACoE,QAAQ,CAACa,eAAe,CAACjB,QAAQ,CAACkB,QAAQ,CAAC,CAAC;QAClExB,OAAO,CAACkB,SAAS,CAAC,CAACZ,QAAQ,CAACa,CAAC,CAACC,CAAC,EAAE,CAACd,QAAQ,CAACa,CAAC,CAACE,CAAC,CAAC;QAE/CrB,OAAO,CAACyB,SAAS,CAAC,CAAC;QACnBzB,OAAO,CAAC0B,IAAI,CAACpB,QAAQ,CAACa,CAAC,CAACC,CAAA,GAAIb,CAAA,GAAI,CAAC,EAAED,QAAQ,CAACa,CAAC,CAACE,CAAA,GAAIZ,CAAA,GAAI,CAAC,EAAEF,CAAC,EAAEE,CAAC,CAAC;QAE9DT,OAAO,CAAC2B,SAAS,CAAC,CAAC;QACnB3B,OAAO,CAAC4B,IAAI,CAAC,CAAC;QACd5B,OAAO,CAACe,WAAU,GAAI,CAAC;QACvBf,OAAO,CAAC6B,OAAO,CAAC,CAAC;MACnB,CAAC;MAED,OAAOjC,QAAQ;IACjB,CAAC;IACDlC,YAAYA,CAAA,EAAG;MACb,IAAI,CAACS,MAAK,IAAK,IAAI,CAACA,MAAM,CAAC2D,MAAM,CAAC,CAAC;IACrC;EACF,CAAC;EACDC,aAAaA,CAAA,EAAG;IACd,IAAI;MACF,IAAI,CAAC5D,MAAM,CAAC6D,OAAO,CAAC,CAAC;MACrBzF,UAAU,CAAC0F,MAAM,CAAC,IAAI,CAACvE,YAAY,CAAC;IACtC,EAAE,OAAOa,CAAC,EAAE,CAAC;EACf;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}