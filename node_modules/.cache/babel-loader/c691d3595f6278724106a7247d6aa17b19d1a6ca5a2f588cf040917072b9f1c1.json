{"ast":null,"code":"import CanvasComp from \"./CanvasComp.vue\";\nimport Proton from \"proton-engine\";\nimport RAFManager from \"raf-manager\";\nimport { getColor } from \"../utils/Color\";\nexport default {\n  name: \"CobwebParticles\",\n  components: {\n    CanvasComp\n  },\n  props: {\n    canvas: Object,\n    bg: Boolean,\n    color: String,\n    num: Number,\n    config: {}\n  },\n  methods: {\n    canvasInited(canvas) {\n      this.createProton(canvas);\n      RAFManager.add(this.renderProton);\n    },\n    canvasResize({\n      width,\n      height\n    }) {\n      this.crossZoneBehaviour.zone.width = width;\n      this.crossZoneBehaviour.zone.height = height;\n      this.proton.renderers[0].resize(width, height);\n    },\n    canvasMouseDown(e) {},\n    createProton(canvas) {\n      const width = canvas.width;\n      const height = canvas.height;\n      this.proton = new Proton();\n      const emitter = new Proton.Emitter();\n      emitter.rate = new Proton.Rate(this.num ? new Proton.Span(this.num) : new Proton.Span(100), new Proton.Span(0.05, 0.2));\n      emitter.addInitialize(new Proton.Mass(1));\n      emitter.addInitialize(new Proton.Radius(1, 4));\n      emitter.addInitialize(new Proton.Life(Infinity));\n      const pointZone = new Proton.Position(new Proton.RectZone(0, 0, width, height));\n      emitter.addInitialize(pointZone);\n      emitter.addInitialize(new Proton.Velocity(new Proton.Span(0.3, 0.6), new Proton.Span(0, 360), \"polar\"));\n      emitter.addBehaviour(new Proton.Alpha(Proton.getSpan(0.2, 0.9)));\n      emitter.addBehaviour(new Proton.Color(this.color || \"#333\"));\n      this.crossZoneBehaviour = new Proton.CrossZone(new Proton.RectZone(0, 0, width, height), \"cross\");\n      emitter.addBehaviour(this.crossZoneBehaviour);\n      emitter.emit(\"once\");\n      emitter.damping = 0;\n      this.proton.addEmitter(emitter);\n      this.proton.addRenderer(this.createRenderer(canvas, emitter));\n    },\n    createRenderer(canvas, emitter) {\n      const context = canvas.getContext(\"2d\");\n      const renderer = new Proton.CanvasRenderer(canvas);\n      const R = 140;\n      renderer.onProtonUpdateAfter = () => {\n        let particles = emitter.particles;\n        for (let i = 0; i < particles.length; i++) {\n          for (let j = i + 1; j < particles.length; j++) {\n            let pA = particles[i];\n            let pB = particles[j];\n            let dis = pA.p.distanceTo(pB.p);\n            if (dis < R) {\n              let alpha = (1 - dis / R) * 0.5;\n              context.strokeStyle = getColor(this.color, alpha) || `rgba(3, 3, 3, ${alpha})`;\n              context.beginPath();\n              context.moveTo(pA.p.x, pA.p.y);\n              context.lineTo(pB.p.x, pB.p.y);\n              context.closePath();\n              context.stroke();\n            }\n          }\n        }\n      };\n      return renderer;\n    },\n    renderProton() {\n      this.proton && this.proton.update();\n    }\n  },\n  beforeDestroy() {\n    try {\n      this.proton.destroy();\n      RAFManager.remove(this.renderProton);\n    } catch (e) {}\n  }\n};","map":{"version":3,"names":["CanvasComp","Proton","RAFManager","getColor","name","components","props","canvas","Object","bg","Boolean","color","String","num","Number","config","methods","canvasInited","createProton","add","renderProton","canvasResize","width","height","crossZoneBehaviour","zone","proton","renderers","resize","canvasMouseDown","e","emitter","Emitter","rate","Rate","Span","addInitialize","Mass","Radius","Life","Infinity","pointZone","Position","RectZone","Velocity","addBehaviour","Alpha","getSpan","Color","CrossZone","emit","damping","addEmitter","addRenderer","createRenderer","context","getContext","renderer","CanvasRenderer","R","onProtonUpdateAfter","particles","i","length","j","pA","pB","dis","p","distanceTo","alpha","strokeStyle","beginPath","moveTo","x","y","lineTo","closePath","stroke","update","beforeDestroy","destroy","remove"],"sources":["/home/arwin/Desktop/code/dashnote/dashnote-website/node_modules/particles-bg-vue/src/particles-bg/particles/CobwebParticles.vue"],"sourcesContent":["<template>\n  <canvas-comp\n    :bg=\"bg\"\n    :canvas=\"canvas\"\n    global-composite-operation=\"source-over\"\n    v-on:canvasInited=\"canvasInited\"\n    v-on:canvasResize=\"canvasResize\"\n    v-on:canvasMouseDown=\"canvasMouseDown\"\n  />\n</template>\n\n<script>\nimport CanvasComp from \"./CanvasComp.vue\";\nimport Proton from \"proton-engine\";\nimport RAFManager from \"raf-manager\";\nimport { getColor } from \"../utils/Color\";\n\nexport default {\n  name: \"CobwebParticles\",\n  components: {\n    CanvasComp\n  },\n  props: {\n    canvas: Object,\n    bg: Boolean,\n    color: String,\n    num: Number,\n    config: {}\n  },\n  methods: {\n    canvasInited(canvas) {\n      this.createProton(canvas);\n      RAFManager.add(this.renderProton);\n    },\n    canvasResize({ width, height }) {\n      this.crossZoneBehaviour.zone.width = width;\n      this.crossZoneBehaviour.zone.height = height;\n      this.proton.renderers[0].resize(width, height);\n    },\n    canvasMouseDown(e) {},\n\n    createProton(canvas) {\n      const width = canvas.width;\n      const height = canvas.height;\n      this.proton = new Proton();\n\n      const emitter = new Proton.Emitter();\n      emitter.rate = new Proton.Rate(\n        this.num ? new Proton.Span(this.num) : new Proton.Span(100),\n        new Proton.Span(0.05, 0.2)\n      );\n\n      emitter.addInitialize(new Proton.Mass(1));\n      emitter.addInitialize(new Proton.Radius(1, 4));\n      emitter.addInitialize(new Proton.Life(Infinity));\n      const pointZone = new Proton.Position(\n        new Proton.RectZone(0, 0, width, height)\n      );\n      emitter.addInitialize(pointZone);\n      emitter.addInitialize(\n        new Proton.Velocity(\n          new Proton.Span(0.3, 0.6),\n          new Proton.Span(0, 360),\n          \"polar\"\n        )\n      );\n\n      emitter.addBehaviour(new Proton.Alpha(Proton.getSpan(0.2, 0.9)));\n      emitter.addBehaviour(new Proton.Color(this.color || \"#333\"));\n      this.crossZoneBehaviour = new Proton.CrossZone(\n        new Proton.RectZone(0, 0, width, height),\n        \"cross\"\n      );\n      emitter.addBehaviour(this.crossZoneBehaviour);\n\n      emitter.emit(\"once\");\n      emitter.damping = 0;\n      this.proton.addEmitter(emitter);\n      this.proton.addRenderer(this.createRenderer(canvas, emitter));\n    },\n    createRenderer(canvas, emitter) {\n      const context = canvas.getContext(\"2d\");\n      const renderer = new Proton.CanvasRenderer(canvas);\n      const R = 140;\n\n      renderer.onProtonUpdateAfter = () => {\n        let particles = emitter.particles;\n\n        for (let i = 0; i < particles.length; i++) {\n          for (let j = i + 1; j < particles.length; j++) {\n            let pA = particles[i];\n            let pB = particles[j];\n            let dis = pA.p.distanceTo(pB.p);\n\n            if (dis < R) {\n              let alpha = (1 - dis / R) * 0.5;\n              context.strokeStyle =\n                getColor(this.color, alpha) || `rgba(3, 3, 3, ${alpha})`;\n              context.beginPath();\n              context.moveTo(pA.p.x, pA.p.y);\n              context.lineTo(pB.p.x, pB.p.y);\n              context.closePath();\n              context.stroke();\n            }\n          }\n        }\n      };\n\n      return renderer;\n    },\n    renderProton() {\n      this.proton && this.proton.update();\n    }\n  },\n  beforeDestroy() {\n    try {\n      this.proton.destroy();\n      RAFManager.remove(this.renderProton);\n    } catch (e) {}\n  }\n};\n</script>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}